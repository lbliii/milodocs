/* Unified Tabs Component CSS
 * - Enhanced tabs ([data-component="tabs"], .tabs__*)
 */

/* ==========================
   Enhanced Tabs (BEM + data)
   ========================== */
[data-component="tabs"],
.tabs {
  margin: 1.5rem 0;
  border-radius: 1rem;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border-color);
  box-shadow: var(--glass-shadow);
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
  overflow: hidden;
  position: relative;
}

/* Light mode: strengthen overall container border for visibility */
@media (prefers-color-scheme: light) {
  [data-component="tabs"],
  .tabs {
    border-color: var(--color-border-primary);
  }
}

/* Header-aligned visuals are now the default */

/* Tab buttons container */
[data-component="tabs"] [data-tab-id],
.tabs__nav {
  background: var(--glass-bg);
  border-bottom: 1px solid var(--glass-border-color);
  padding: 0.5rem 0.5rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
}

/* Light mode: strengthen nav divider for visibility */
@media (prefers-color-scheme: light) {
  [data-component="tabs"] [data-tab-id],
  .tabs__nav {
    border-bottom-color: var(--color-border-primary);
  }
}

/* Individual tab buttons */
[data-component="tabs"] button[data-tab-option],
.tabs__button {
  position: relative;
  border-radius: 0.625rem;
  font-weight: 600;
  transition:
    background-color var(--timing-medium) var(--easing-standard),
    border-color var(--timing-medium) var(--easing-standard),
    color var(--timing-medium) var(--easing-standard),
    transform var(--timing-medium) var(--easing-standard);
  border: 1px solid var(--glass-border-color);
  cursor: pointer;
  white-space: nowrap;
  background: var(--glass-bg);
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
  padding: 0.25rem 0.5rem; /* match breadcrumb */
}

/* Default (inactive) */
[data-component="tabs"] button[data-tab-option]:not(.bg-brand),
.tabs__button:not(.bg-brand) {
  background: var(--glass-bg) !important;
  color: var(--color-text-primary) !important;
  border-color: var(--glass-border-color);
}

/* Light mode: increase inactive button border contrast */
@media (prefers-color-scheme: light) {
  [data-component="tabs"] button[data-tab-option]:not(.bg-brand),
  .tabs__button:not(.bg-brand) {
    border-color: var(--color-border-primary);
  }
}

/* Hover */
[data-component="tabs"] button[data-tab-option]:not(.bg-brand):hover,
.tabs__button:not(.bg-brand):hover {
  background: var(--color-surface-hover) !important;
  color: var(--color-brand) !important;
  border-color: rgba(var(--color-brand-rgb), 0.35);
  transform: translateY(-1px);
  box-shadow: var(--elevation-2);
}

/* Active */
[data-component="tabs"] button.bg-brand,
.tabs__button.bg-brand {
  background: var(--color-brand) !important;
  color: var(--color-text-inverse, #fff) !important;
  border-color: var(--color-brand);
  box-shadow: var(--elevation-brand-subtle);
  transform: translateY(-1px);
}

/* Subtle variant: revert to tinted-active style */
[data-component="tabs"].tabs--subtle button.bg-brand,
.tabs.tabs--subtle .tabs__button.bg-brand {
  background:
    linear-gradient(
      135deg,
      rgba(var(--color-brand-rgb), 0.08) 0%,
      transparent 50%,
      rgba(var(--color-brand-rgb), 0.06) 100%
    ),
    var(--glass-bg) !important;
  color: var(--color-text-primary) !important;
  border-color: rgba(var(--color-brand-rgb), 0.45);
  box-shadow: 0 2px 8px rgba(var(--color-brand-rgb), 0.18), var(--elevation-2);
}

/* Dark mode: increase active contrast by default */
@media (prefers-color-scheme: dark) {
  [data-component="tabs"] button.bg-brand,
  .tabs__button.bg-brand {
    background: var(--color-brand) !important;
    color: var(--color-text-inverse, #fff) !important;
    border-color: var(--color-brand);
    box-shadow: var(--elevation-brand-medium);
  }
}

/* Focus */
[data-component="tabs"] button[data-tab-option]:focus-visible,
.tabs__button:focus-visible {
  outline: 2px solid var(--color-brand);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px var(--color-brand), 0 0 0 4px rgba(var(--color-brand-rgb), 0.15);
}

/* Content container */
[data-component="tabs"] .w-full,
.tabs__content {
  min-height: 200px;
  position: relative;
  overflow: hidden;
  border-top: 1px solid var(--glass-border-color);
  transition: height var(--timing-medium) var(--easing-standard);
  isolation: isolate; /* prevent child blends from darkening surface */
}

/* Panels */
[data-component="tabs"] [data-tabcontent],
.tabs__panel {
  padding: 1.25rem 1.5rem;
  background: transparent;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  will-change: opacity, transform;
  backface-visibility: hidden;
  transform: var(--transform-slide-in-up);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition:
    opacity var(--timing-medium) var(--easing-standard),
    transform var(--timing-medium) var(--easing-standard),
    visibility 0s linear var(--timing-medium);
}

/* Visible panel */
[data-component="tabs"] [data-tabcontent].is-active,
.tabs__panel.is-active {
  opacity: 1;
  transform: var(--transform-translate-none);
  visibility: visible;
  pointer-events: auto;
  transition-delay: 0s, 0s, 0s;
  animation: slideInUp var(--timing-medium) var(--easing-standard);
}

/* Panel content spacing */
[data-component="tabs"] [data-tabcontent] > *:first-child,
.tabs__panel > *:first-child { margin-top: 0; }
[data-component="tabs"] [data-tabcontent] > *:last-child,
.tabs__panel > *:last-child { margin-bottom: 0; }

/* Smooth entrance */
[data-component="tabs"] [data-tabcontent] *,
.tabs__panel * { transition: none; }

/* Compact density variant */
[data-component="tabs"].tabs--compact .tabs__nav,
.tabs.tabs--compact .tabs__nav {
  padding: 0.25rem 0.25rem;
  gap: 0.125rem;
}

[data-component="tabs"].tabs--compact button[data-tab-option],
.tabs.tabs--compact .tabs__button {
  padding: 0.375rem 0.5rem;
  font-size: 0.875rem;
}

/* Underline hover animation for inactive buttons */
[data-component="tabs"] button[data-tab-option]:not(.bg-brand)::after,
.tabs__button:not(.bg-brand)::after {
  content: "";
  position: absolute;
  left: 0.5rem; right: 0.5rem; bottom: 0.25rem;
  height: 2px;
  background: rgba(var(--color-brand-rgb), 0.35);
  transform: scaleX(0);
  transform-origin: left center;
  transition: transform var(--timing-medium) var(--easing-standard);
}

[data-component="tabs"] button[data-tab-option]:not(.bg-brand):hover::after,
.tabs__button:not(.bg-brand):hover::after { transform: scaleX(1); }

/* Responsive */
@media (max-width: 640px) {
  [data-component="tabs"] [data-tab-id],
  .tabs__nav { flex-direction: column; align-items: stretch; }
  [data-component="tabs"] button[data-tab-option],
  .tabs__button { text-align: left; justify-content: flex-start; }
  [data-component="tabs"] [data-tabcontent],
  .tabs__panel { padding: 1.5rem; }
}

/* Print */
@media print {
  [data-component="tabs"] [data-tab-id],
  .tabs__nav { display: none; }
  [data-component="tabs"] [data-tabcontent],
  .tabs__panel { position: static !important; display: block !important; opacity: 1 !important; visibility: visible !important; pointer-events: auto !important; transform: none !important; page-break-inside: avoid; }
  [data-component="tabs"] [data-tabcontent]:not(:first-of-type),
  .tabs__panel:not(:first-of-type) { margin-top: 2rem; border-top: 1px solid var(--color-border-primary); padding-top: 2rem; }
  [data-component="tabs"] [data-tabcontent]::before,
  .tabs__panel::before { content: "Tab: " attr(data-tabcontent); display: block; font-weight: bold; margin-bottom: 1rem; color: var(--color-text-secondary); font-size: 0.875rem; text-transform: capitalize; }
}

@media (prefers-color-scheme: dark) {
  [data-component="tabs"], .tabs { box-shadow: var(--elevation-4); }
  [data-component="tabs"] button.bg-brand, .tabs__button.bg-brand { box-shadow: var(--elevation-brand-medium); }
}

@media (prefers-color-scheme: dark) {
  [data-component="tabs"]::after,
  .tabs::after {
    background: linear-gradient(
      to bottom,
      rgba(0,0,0,0) 0%,
      rgba(0,0,0,0.18) 55%,
      rgba(0,0,0,0.28) 100%
    );
  }
}

