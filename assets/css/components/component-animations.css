/* Component-Specific Animations - Enhanced State-Driven Animations
 * Professional animations that respond to component states
 * Uses the new design token system for consistency
 */

/* ========================================
   COLLAPSE COMPONENT ANIMATIONS
   ======================================== */

/* Collapse component state transitions */
.component[data-component="article-collapse"] {
  transition: var(--collapse-timing) var(--collapse-easing);
}

.component[data-component="article-collapse"][data-component-state="expanding"] {
  opacity: var(--loading-opacity);
}

.component[data-component="article-collapse"][data-component-state="collapsing"] {
  opacity: var(--loading-opacity);
}

.component[data-component="article-collapse"][data-component-state="expanded"] {
  opacity: 1;
}

.component[data-component="article-collapse"][data-component-state="collapsed"] {
  opacity: 1;
}

/* Enhanced collapse content animations */
.collapse-content {
  transition: all var(--collapse-timing) var(--collapse-easing);
  transform-origin: top;
}

.collapse-content.expanding {
  opacity: var(--collapse-opacity-start);
  transform: var(--collapse-transform-start);
  animation: collapse-expand var(--collapse-timing) var(--collapse-easing) forwards;
}

.collapse-content.collapsing {
  opacity: var(--collapse-opacity-end);
  transform: var(--collapse-transform-end);
  animation: collapse-collapse var(--collapse-timing) var(--collapse-easing) forwards;
}

/* ========================================
   TAB COMPONENT ANIMATIONS
   ======================================== */

/* Tab container state management */
.component[data-component="article-tabs"] {
  transition: var(--tab-transition);
}

.component[data-component="article-tabs"][data-component-state="switching"] {
  opacity: 0.9;
}

.component[data-component="article-tabs"][data-component-state="active"] {
  opacity: 1;
}

/* Enhanced tab button animations */
.tab-button {
  transition: all var(--timing-fast) var(--easing-standard);
  position: relative;
  overflow: hidden;
}

.tab-button:hover {
  background-color: var(--tab-background-hover);
  transform: translateY(-1px);
}

.tab-button.active {
  background-color: var(--tab-background-active);
  border-bottom: var(--tab-border-active);
}

/* Tab content slide animations */
.tab-content {
  transition: all var(--timing-medium) var(--easing-emphasized);
}

.tab-content.switching-out {
  opacity: 0;
  transform: var(--tab-content-slide);
}

.tab-content.switching-in {
  opacity: 1;
  transform: translateX(0);
  animation: tab-slide-in var(--timing-medium) var(--easing-emphasized);
}

/* ========================================
   RELATED CONTENT ANIMATIONS
   ======================================== */

/* Related content view switching */
.component[data-component="article-related-content"] {
  transition: all var(--timing-medium) var(--easing-smooth);
}

.component[data-component="article-related-content"][data-component-state="switching-view"] {
  opacity: var(--loading-opacity);
  filter: var(--loading-blur);
}

.component[data-component="article-related-content"][data-component-state="view-active"] {
  opacity: 1;
  filter: none;
}

/* View transition animations */
.related-content-view {
  transition: all var(--timing-standard) var(--easing-emphasized);
}

.related-content-view.switching {
  opacity: 0;
  transform: translateY(10px);
}

.related-content-view.active {
  opacity: 1;
  transform: translateY(0);
}

/* ========================================
   PROGRESSIVE REVEAL ANIMATIONS
   ======================================== */

/* Progressive reveal container */
.component[data-component="notebook-progressive-reveal"] {
  transition: all var(--reveal-timing) var(--reveal-easing);
}

.component[data-component="notebook-progressive-reveal"][data-component-state="initializing"] {
  opacity: var(--loading-opacity);
}

.component[data-component="notebook-progressive-reveal"][data-component-state="ready"] {
  opacity: 1;
}

/* Enhanced notebook cell reveal animations */
.notebook-cell--hidden {
  opacity: var(--reveal-opacity-start);
  transform: translateY(var(--reveal-slide-distance));
  transition: all var(--reveal-timing) var(--reveal-easing);
}

.notebook-cell--revealing {
  opacity: var(--reveal-opacity-end);
  transform: translateY(0);
}

/* Staggered reveal animation */
.notebook-cell:nth-child(1) { animation-delay: calc(var(--reveal-stagger-delay) * 1); }
.notebook-cell:nth-child(2) { animation-delay: calc(var(--reveal-stagger-delay) * 2); }
.notebook-cell:nth-child(3) { animation-delay: calc(var(--reveal-stagger-delay) * 3); }
.notebook-cell:nth-child(4) { animation-delay: calc(var(--reveal-stagger-delay) * 4); }
.notebook-cell:nth-child(5) { animation-delay: calc(var(--reveal-stagger-delay) * 5); }

/* ========================================
   READING PROGRESS BAR ANIMATIONS
   ======================================== */

/* TOC progress bar professional initialization */
.component[data-component="article-toc"][data-component-state="initializing-progress"] #progress-bar,
.component[data-component="article-toc"][data-component-state="initializing-progress"] #progress-text {
  opacity: 0;
  transform: translateY(5px);
}

.component[data-component="article-toc"][data-component-state="progress-active"] #progress-bar,
.component[data-component="article-toc"][data-component-state="progress-active"] #progress-text {
  opacity: 1;
  transform: translateY(0);
}

/* Enhanced progress bar styling */
#progress-bar {
  transition: width var(--timing-standard) var(--easing-emphasized),
              opacity var(--timing-medium) var(--easing-emphasized),
              transform var(--timing-medium) var(--easing-emphasized);
  transform-origin: left center;
}

#progress-text {
  transition: opacity var(--timing-medium) var(--easing-emphasized),
              transform var(--timing-medium) var(--easing-emphasized);
}

/* Smooth progress updates */
#progress-bar.updating {
  transition: width var(--timing-fast) var(--easing-standard);
}

/* Reading progress container enhancement */
#reading-progress {
  transition: all var(--timing-medium) var(--easing-smooth);
}

#reading-progress:hover #progress-bar {
  box-shadow: 0 0 8px rgba(var(--color-brand-rgb), 0.3);
}

/* Progress stage-based styling */
.component[data-component="article-toc"] #progress-bar {
  transition: all var(--timing-standard) var(--easing-emphasized);
}

/* Start of article - subtle glow */
.component[data-component="article-toc"][style*="--progress-stage: start"] #progress-bar {
  box-shadow: 0 0 4px rgba(var(--color-brand-rgb), 0.2);
}

/* Middle of article - standard appearance */
.component[data-component="article-toc"][style*="--progress-stage: middle"] #progress-bar {
  box-shadow: 0 0 2px rgba(var(--color-brand-rgb), 0.1);
}

/* Near end - enhanced glow indicating completion */
.component[data-component="article-toc"][style*="--progress-stage: end"] #progress-bar {
  box-shadow: 0 0 6px rgba(var(--color-brand-rgb), 0.4);
  filter: brightness(1.1);
}

/* ========================================
   ENHANCED HOVER STATES
   ======================================== */

/* Component cards with enhanced hover */
.tile, .card, .article-card {
  transition: all var(--card-transition);
  box-shadow: var(--card-shadow-rest);
}

.tile:hover, .card:hover, .article-card:hover {
  transform: var(--card-transform-hover);
  box-shadow: var(--card-shadow-hover);
}

.tile:active, .card:active, .article-card:active {
  transform: var(--card-transform-active);
  box-shadow: var(--card-shadow-active);
}

/* Button enhancements */
button, .btn {
  transition: all var(--timing-fast) var(--easing-standard);
}

button:hover, .btn:hover {
  transform: scale(var(--hover-scale));
}

button:active, .btn:active {
  transform: scale(var(--active-scale));
}

/* ========================================
   LOADING STATE ANIMATIONS
   ======================================== */

/* Enhanced loading spinner for all components */
.component[data-component-state="loading"]:after,
.component[data-component-state="initializing"]:after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: var(--loading-spinner-size);
  height: var(--loading-spinner-size);
  margin: calc(var(--loading-spinner-size) / -2) 0 0 calc(var(--loading-spinner-size) / -2);
  border: var(--loading-spinner-border) solid rgba(var(--color-brand-rgb), 0.2);
  border-radius: 50%;
  border-top-color: var(--color-brand);
  animation: component-spin var(--timing-dramatic) linear infinite;
  z-index: 1000;
}

/* ========================================
   KEYFRAME ANIMATIONS
   ======================================== */

@keyframes collapse-expand {
  from {
    opacity: var(--collapse-opacity-start);
    transform: var(--collapse-transform-start);
  }
  to {
    opacity: var(--collapse-opacity-end);
    transform: var(--collapse-transform-end);
  }
}

@keyframes collapse-collapse {
  from {
    opacity: var(--collapse-opacity-end);
    transform: var(--collapse-transform-end);
  }
  to {
    opacity: var(--collapse-opacity-start);
    transform: var(--collapse-transform-start);
  }
}

@keyframes tab-slide-in {
  from {
    opacity: 0;
    transform: var(--tab-content-slide);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes component-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes reveal-stagger {
  from {
    opacity: var(--reveal-opacity-start);
    transform: translateY(var(--reveal-slide-distance));
  }
  to {
    opacity: var(--reveal-opacity-end);
    transform: translateY(0);
  }
}

/* ========================================
   RESPONSIVE BEHAVIOR
   ======================================== */

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .component,
  .collapse-content,
  .tab-button,
  .tab-content,
  .related-content-view,
  .notebook-cell,
  .tile,
  .card,
  .article-card,
  button,
  .btn {
    animation: none !important;
    transition: opacity var(--timing-fast) ease !important;
  }
  
  .component[data-component-state="loading"]:after,
  .component[data-component-state="initializing"]:after {
    animation: none !important;
    border: var(--loading-spinner-border) solid var(--color-brand) !important;
  }
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .tile:hover,
  .card:hover,
  .article-card:hover {
    transform: none; /* Disable hover transforms on mobile */
  }
  
  button:hover,
  .btn:hover {
    transform: none; /* Disable hover scaling on mobile */
  }
}