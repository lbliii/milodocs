@tailwind base;

@layer base {

  /* Global Header Sizes & Thickness - NVIDIA Style */
  h1 {
    @apply text-3xl font-black;
    word-wrap: break-word;
  }
  h2 {
    @apply text-2xl font-bold;
    word-wrap: break-word;
  }
  h3 {
    @apply text-xl font-bold;
    word-wrap: break-word;
  }
  h4 {
    @apply text-lg font-bold;
    word-wrap: break-word;
  }
  h5 {
    @apply text-base font-bold;
    word-wrap: break-word;
  }
  h6 {
    @apply text-sm font-bold;
    word-wrap: break-word;
  }

  /* Global Font Family - Uses brand font with fallbacks */
  main { @apply font-brand;
  }

  /*  Article Content Styles */ 

  /* Margins */
  #articleContent > *,
  #articleContent .notice p {
    @apply my-3;
  }

  /* Font Color & Thickness */
  #articleContent {
    @apply text-black;
  }

  #articleContent strong {
    @apply font-brand font-semibold;
  }

  /* List Styles */
  #articleContent li li {
    @apply ml-12 py-1;
  }
  #articleContent ul {
    @apply list-disc ml-6;
  }

  /* Handles the anchor placement issue for TOC links */
  #articleContent [id]:target {
    scroll-margin-top: 50px;
  }

  /* Nested Code, Tables, Notices in Ordered Lists*/
  #articleContent ol > li p:first-child {
    @apply inline;
  }
  #articleContent ol > li p:not(:first-child),
  ol > li > section,
  ol > li > div,
  ol > li > table {
    @apply block ml-6 my-4;
  }

  /* Circled Numbers in Ordered Lists */
  #articleContent ol {
    list-style: none;
    counter-reset: item;
  }
  #articleContent ol > li {
    @apply py-2;
    counter-increment: item;
  }
  #articleContent ol > li::before {
    content: counter(item);
    border-radius: 50%;
    width: 1.5em;
    height: 1.5em;
    display: inline-block;
    text-align: center;
    line-height: 1.5em;
    margin-right: 0.5em;
    @apply bg-zinc-200;
  }
  #articleContent li > ol > li::before {
    content: counter(item);
    border-radius: 50%;
    width: 1.5em;
    height: 1.5em;
    display: inline-block;
    text-align: center;
    line-height: 1.5em;
    margin-right: 0.5em;
    @apply bg-zinc-200;
  }
  /* Single Line Code - NVIDIA Style (not syntax highlighted blocks) */
  #articleContent code:not(pre code) {
    @apply bg-zinc-100 p-1 rounded text-xs font-light;
    font-family: var(--font-family-mono, RobotoMono, monospace);
    color: var(--color-brand-1);
  }

  /* Syntax Highlighted Code - Let Hugo handle colors */
  #articleContent pre {
    @apply overflow-x-auto overflow-y-visible;
    /* Remove color: unset to allow Hugo's syntax colors */
  }
  #articleContent .highlight pre {
    @apply p-2;
  }
  #articleContent .highlight pre code {
    @apply p-0 bg-transparent !important;
    /* Don't override Hugo's syntax highlighting colors */
    color: inherit !important;
  }
  #articleContent pre code {
    @apply p-0 m-0;
    font-family: var(--font-family-mono, RobotoMono, monospace);
    /* Don't set color here - let Hugo's highlighting work */
  }

  /* Code block wrapper styling */
  .codeblock-wrapper {
    @apply relative;
  }
  .codeblock-wrapper .highlight {
    @apply m-0;
  }
  .codeblock-wrapper .highlight pre {
    @apply m-0 p-4 rounded;
  }
  /* Copy button positioning */
  .codeblock-wrapper .copy-btn {
    z-index: 10;
  }

  /* Link Styles - NVIDIA Style */
  #articleContent a:not(#quick-install a) {
    @apply underline;
    text-decoration-color: var(--color-brand);
  }
  #articleContent a:hover:not(#quick-install a) {
    @apply text-brand-1 transition duration-300;
  }
  #articleContent a.headerlink {
    color: var(--color-brand-1);
  }

  /* Global Table Styles - Enhanced for NVIDIA */
  table {
    @apply w-full border-collapse text-sm;
  }
  table th,
  table td {
    @apply p-3 text-left align-top border-t;
  }
  table th {
    @apply bg-black text-white font-semibold;
  }
  table tr:hover {
    background-color: var(--color-brand);
  }

  /* Responsive Tables */
  @media (max-width: 640px) {
    table {
      @apply block;
    }
    table thead {
      @apply hidden;
    }
    table tbody tr {
      @apply block mb-4 shadow-md;
    }
    table tbody tr:last-child {
      @apply mb-0;
    }
    table td {
      @apply flex justify-between p-2;
    }
  }

  /* NVIDIA-specific enhancements */
  .nvidia-accent {
    color: var(--color-brand);
  }
  
  .nvidia-bg-accent {
    background-color: var(--color-brand);
  }
  
  .nvidia-border-accent {
    border-color: var(--color-brand);
  }

  /* Enhanced notice styles */
  #articleContent .notice a {
    @apply text-black underline font-bold;
    text-decoration-color: var(--color-brand);
  }

  .admonition {
    @apply bg-zinc-100 p-4 my-4;
  }

  /* .note, .tip, .caution, .warning {
    @apply bg-zinc-100 p-4 my-4;
  } */

  .admonition-title {
    @apply font-bold;
  }

  /* Table of Contents */

  .toc > nav > ul > li > a {
    @apply font-bold
  }

  #TableOfContents ul ul {
    @apply ml-4;
  }

  /* Dark Theme Overrides */
  .dark .bg-white {
    @apply bg-zinc-900;
  }
  .dark .bg-black {
    @apply bg-zinc-700;
  }
  .dark .bg-zinc-100 {
    @apply bg-zinc-800;
  }
  .dark .bg-zinc-200 {
    @apply bg-zinc-700;
  }
  .dark .text-black {
    @apply text-white;
  }
  .dark .text-zinc {
    @apply text-white;
  }
  .dark .text-zinc-900 {
    @apply text-zinc-200;
  }
  .dark .notice {
    box-shadow: inset 0 9000px 0px rgba(0, 0, 0, 0.2);
  }
}

@tailwind components;

@layer components {
  /* Enhanced Navigation Animations */
  /* Hide nested content by default to prevent flash */
  .nested-content {
    display: none;
  }
  
  /* Prevent layout shift during initialization */
  #linkTree:not(.initialized) {
    opacity: 0;
    transition: opacity 0.2s ease;
  }
  
  #linkTree.initialized {
    opacity: 1;
  }
  
  /* Show nested content when sidebar is initialized and expanded */
  #linkTree.initialized .nested-content.expanded {
    display: block;
  }
  
  /* Only animate after initialization to prevent flash */
  #linkTree.initialized .nested-content.expanding {
    display: block;
    animation: slideDown 0.3s ease-out;
    overflow: hidden;
  }

  #linkTree.initialized .nested-content.collapsing {
    animation: slideUp 0.3s ease-out;
    overflow: hidden;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      max-height: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      max-height: 1000px;
      transform: translateY(0);
    }
  }

  @keyframes slideUp {
    from {
      opacity: 1;
      max-height: 1000px;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      max-height: 0;
      transform: translateY(-10px);
    }
  }

  /* Enhanced hover states */
  .nested-content a:hover {
    transform: translateX(4px);
    @apply transition-transform duration-200;
  }

  /* Loading skeleton for content */
  .content-skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
  }

  @keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Page transitions removed - caused flicker with static site navigation */

  /* Ripple effect for buttons */
  button {
    @apply relative overflow-hidden;
  }

  .ripple {
    @apply absolute rounded-full pointer-events-none;
    background: rgba(255, 255, 255, 0.3);
    transform: scale(0);
    animation: ripple-animation 0.6s ease-out;
  }

  @keyframes ripple-animation {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  /* Enhanced micro-interactions */
  .tile, .card {
    @apply transition-all duration-200;
  }

  .tile:hover, .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }

  /* Fade-in animation classes */
  .fade-in-on-scroll {
    opacity: 0;
    transform: translateY(20px);
    @apply transition-all duration-700;
  }

  .fade-in-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Enhanced focus states for accessibility */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: 2px solid var(--color-brand);
    outline-offset: 2px;
    @apply rounded;
  }

  /* Notification styles */
  .notification {
    @apply fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300;
  }

  /* Loading states */
  .loading-spinner {
    border: 2px solid #f3f3f3;
    border-top: 2px solid var(--color-brand);
    @apply rounded-full w-5 h-5;
    animation: spin 1s linear infinite;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-brand);
    @apply rounded;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-brand-1);
  }

  .dark ::-webkit-scrollbar-track {
    @apply bg-gray-700;
  }

  .dark ::-webkit-scrollbar-thumb {
    @apply bg-gray-600;
  }

  /* Mobile-specific enhancements */
  @media (max-width: 768px) {
    /* Larger touch targets */
    button, a {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Better spacing for mobile */
    .tile, .card {
      @apply mb-4;
    }
    
    /* Reduced motion for users who prefer it */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  }

  /* Dark mode enhancements */
  .dark .content-skeleton {
    background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
  }

  .dark .ripple {
    background: rgba(255, 255, 255, 0.2);
  }
}

@tailwind utilities;

@layer utilities {
  /* CSS custom properties for dynamic viewport height on mobile */
  :root {
    --vh: 1vh;
  }

  .h-screen-dynamic {
    height: calc(var(--vh, 1vh) * 100);
  }
}
