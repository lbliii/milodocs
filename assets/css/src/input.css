@tailwind base;

@layer base {

  /* Smooth theme transitions */
  html {
    transition: color-scheme 0.3s ease;
  }
  
  * {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  }

  /* Global Header Sizes & Thickness - NVIDIA Style */
  h1 {
    @apply text-3xl font-black;
    word-wrap: break-word;
  }
  h2 {
    @apply text-2xl font-bold;
    word-wrap: break-word;
  }
  h3 {
    @apply text-xl font-bold;
    word-wrap: break-word;
  }
  h4 {
    @apply text-lg font-bold;
    word-wrap: break-word;
  }
  h5 {
    @apply text-base font-bold;
    word-wrap: break-word;
  }
  h6 {
    @apply text-sm font-bold;
    word-wrap: break-word;
  }

  /* Global Font Family - Uses brand font with fallbacks */
  main { @apply font-brand;
  }

  /*  Article Content Styles */ 

  /* Margins */
  #articleContent > * {
    @apply my-3;
  }

  /* Font Color & Thickness */
  #articleContent {
    color: var(--color-text-primary);
  }

  #articleContent strong {
    @apply font-brand font-semibold;
  }

  /* List Styles */
  #articleContent li li {
    @apply ml-12 py-1;
  }
  #articleContent ul {
    @apply list-disc ml-6;
  }

  /* Handles the anchor placement issue for TOC links */
  #articleContent [id]:target {
    scroll-margin-top: 50px;
  }

  /* Nested Code, Tables, Notices in Ordered Lists*/
  #articleContent ol > li p:first-child {
    @apply inline;
  }
  #articleContent ol > li p:not(:first-child),
  ol > li > section,
  ol > li > div,
  ol > li > table {
    @apply block ml-6 my-4;
  }

  /* Enhanced Numbered Lists */
  #articleContent ol {
    list-style: none;
    counter-reset: item;
  }
  #articleContent ol > li {
    @apply py-3;
    counter-increment: item;
    position: relative;
    transition: all 0.2s ease;
  }
  
  /* Enhanced List Item Hover Effect */
  #articleContent ol > li:hover {
    transform: translateX(2px);
  }
  
  /* Enhanced Primary Level Numbers (Rounded Squares) */
  #articleContent ol > li::before {
    content: counter(item);
    width: 2rem;
    height: 2rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    margin-right: 0.75rem;
    border-radius: 0.75rem;
    font-weight: 600;
    font-size: 0.875rem;
    background: linear-gradient(
      135deg,
      var(--color-brand) 0%,
      rgba(var(--color-brand-rgb), 0.8) 100%
    );
    color: var(--color-text-inverse);
    box-shadow: 
      0 2px 8px rgba(var(--color-brand-rgb), 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transition: all 0.2s ease;
    position: relative;
    top: -1px;
  }
  
  /* Enhanced Primary Level Hover */
  #articleContent ol > li:hover::before {
    transform: scale(1.1);
    box-shadow: 
      0 4px 16px rgba(var(--color-brand-rgb), 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
  
  /* Enhanced Nested Level Numbers (Circles) */
  #articleContent li > ol > li::before {
    content: counter(item);
    border-radius: 50%;
    width: 1.75rem;
    height: 1.75rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    margin-right: 0.75rem;
    font-weight: 500;
    font-size: 0.8rem;
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      var(--color-bg-secondary) 100%
    );
    color: var(--color-brand);
    border: 2px solid var(--color-brand);
    box-shadow: 
      0 2px 6px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;
    position: relative;
    top: -1px;
  }
  
  /* Enhanced Nested Level Hover */
  #articleContent li > ol > li:hover::before {
    background: var(--color-brand);
    color: var(--color-text-inverse);
    transform: scale(1.1);
    box-shadow: 
      0 4px 12px rgba(var(--color-brand-rgb), 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  /* Single Line Code - NVIDIA Style (not syntax highlighted blocks) */
  #articleContent code:not(pre code) {
    @apply p-1 rounded text-xs font-light;
    background-color: var(--color-bg-secondary);
    color: var(--color-brand-1);
    font-family: var(--font-family-mono, RobotoMono, monospace);
  }

  /* Syntax Highlighted Code - Let Hugo handle colors */
  #articleContent pre {
    @apply overflow-x-auto overflow-y-visible;
    /* Remove color: unset to allow Hugo's syntax colors */
  }
  #articleContent .highlight pre {
    @apply p-2;
  }
  #articleContent .highlight pre code {
    @apply p-0 bg-transparent !important;
    /* Don't override Hugo's syntax highlighting colors */
    color: inherit !important;
  }
  #articleContent pre code {
    @apply p-0 m-0;
    font-family: var(--font-family-mono, RobotoMono, monospace);
    /* Don't set color here - let Hugo's highlighting work */
  }

  /* Code block wrapper styling */
  .codeblock-wrapper {
    @apply relative;
  }
  .codeblock-wrapper .highlight {
    @apply m-0;
  }
  .codeblock-wrapper .highlight pre {
    @apply m-0 p-4 rounded;
  }
  /* Copy button positioning */
  .codeblock-wrapper .copy-btn {
    z-index: 10;
  }

  /* Link Styles - NVIDIA Style */
  #articleContent a:not(#quick-install a) {
    @apply underline;
    text-decoration-color: var(--color-brand);
  }
  #articleContent a:hover:not(#quick-install a) {
    @apply text-brand-1 transition duration-300;
  }
  #articleContent a.headerlink {
    color: var(--color-brand-1);
  }

  /* Global Table Styles - Enhanced for NVIDIA */
  table {
    @apply w-full border-collapse text-sm;
    border-color: var(--color-border-primary);
  }
  table th,
  table td {
    @apply p-3 text-left align-top;
    border-top: 1px solid var(--color-border-primary);
    color: var(--color-text-primary);
  }
  table th {
    background-color: var(--color-bg-inverse);
    color: var(--color-text-inverse);
    @apply font-semibold;
  }
  table tr:hover {
    background-color: var(--color-hover);
  }

  /* Responsive Tables */
  @media (max-width: 640px) {
    table {
      @apply block;
    }
    table thead {
      @apply hidden;
    }
    table tbody tr {
      @apply block mb-4 shadow-md;
    }
    table tbody tr:last-child {
      @apply mb-0;
    }
    table td {
      @apply flex justify-between p-2;
    }
  }

  /* NVIDIA-specific enhancements */
  .nvidia-accent {
    color: var(--color-brand);
  }
  
  .nvidia-bg-accent {
    background-color: var(--color-brand);
  }
  
  .nvidia-border-accent {
    border-color: var(--color-brand);
  }

  /* Legacy notice styles - removed in favor of enhanced notices */

  .admonition {
    background-color: var(--color-bg-secondary);
    color: var(--color-text-primary);
    @apply p-4 my-4;
  }

  /* .note, .tip, .caution, .warning {
    @apply bg-zinc-100 p-4 my-4;
  } */

  .admonition-title {
    @apply font-bold;
  }

  /* Table of Contents */

  .toc > nav > ul > li > a {
    @apply font-bold
  }

  #TableOfContents ul ul {
    @apply ml-4;
  }

  /* Enhanced Dark Theme Support */
  .dark .bg-white {
    background-color: var(--color-bg-primary);
  }
  .dark .bg-black {
    background-color: var(--color-surface-hover);
  }
  .dark .bg-zinc-100 {
    background-color: var(--color-bg-secondary);
  }
  .dark .bg-zinc-200 {
    background-color: var(--color-surface-hover);
  }
  .dark .text-black {
    color: var(--color-text-primary);
  }
  .dark .text-zinc {
    color: var(--color-text-primary);
  }
  .dark .text-zinc-900 {
    color: var(--color-text-secondary);
  }
  /* Legacy dark notice styles - removed in favor of enhanced notices */
}

@tailwind components;

/* Import Component Files */
@import "components/notice.css";

@layer components {
  
  /* Navigation Components - Tailwind Best Practices */
  .topbar {
    @apply sticky top-0 z-50 p-2 transition-colors duration-300;
    background-color: var(--color-bg-primary);
    border-bottom: 1px solid var(--color-border-primary);
  }
  
  .nav-links {
    @apply flex items-center mx-2 space-x-4 justify-start w-1/3 
           font-brand font-light text-sm transition-colors duration-300;
    color: var(--color-text-primary);
  }
  
  .nav-link {
    @apply hidden md:block relative px-3 py-2 rounded-lg font-medium
           transition-all duration-200 focus:outline-none focus:ring-2;
    color: var(--color-text-primary);
    --tw-ring-color: var(--color-brand);
    text-decoration: none;
    overflow: hidden;
  }
  
  .nav-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(var(--color-brand-rgb), 0.08) 0%,
      transparent 50%,
      rgba(var(--color-brand-rgb), 0.03) 100%
    );
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
  }
  
  .nav-link:hover,
  .nav-link:focus {
    color: var(--color-brand);
    transform: translateY(-1px);
    background-color: var(--color-surface-hover);
  }
  
  .nav-link:hover::before,
  .nav-link:focus::before {
    opacity: 1;
  }
  
  .dropdown {
    @apply absolute left-0 mt-2 w-52 rounded-xl overflow-hidden 
           shadow-xl p-2 transition-all duration-300;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border-primary);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px) scale(0.95);
    backdrop-filter: blur(10px);
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.15),
      0 0 20px rgba(var(--color-brand-rgb), 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  
  .group:hover .dropdown {
    @apply block;
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
  }
  
  .dropdown::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 20px;
    width: 12px;
    height: 12px;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border-primary);
    border-bottom: none;
    border-right: none;
    transform: rotate(45deg);
    z-index: -1;
  }
  
  .dropdown-link {
    @apply flex items-center px-4 py-3 text-sm rounded-lg 
           transition-all duration-200 focus:outline-none focus:ring-2
           relative overflow-hidden;
    color: var(--color-text-primary);
    --tw-ring-color: var(--color-brand);
    text-decoration: none;
    margin: 2px 0;
  }
  
  .dropdown-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      90deg,
      rgba(var(--color-brand-rgb), 0.08) 0%,
      transparent 100%
    );
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
  }
  
  .dropdown-link:hover,
  .dropdown-link:focus {
    background-color: var(--color-surface-hover);
    color: var(--color-brand);
    transform: translateX(4px);
    border-left: 3px solid var(--color-brand);
    padding-left: calc(1rem - 3px);
  }
  
  .dropdown-link:hover::before,
  .dropdown-link:focus::before {
    opacity: 1;
  }
  
  /* Sidebar Navigation Components - Cohesive Design */
  .sidebar-item {
    @apply flex items-center rounded-md transition-all duration-200;
    background-color: transparent;
    margin: 1px 0;
  }
  
  .sidebar-item:hover {
    background-color: var(--color-surface-hover);
  }
  
  .sidebar-item__link {
    @apply flex items-center flex-grow p-2 transition-all duration-200 
           focus:outline-none focus:ring-2 rounded-l-md;
    color: var(--color-text-primary);
    text-decoration: none;
    --tw-ring-color: var(--color-brand);
    min-height: 2.5rem; /* Consistent touch target */
  }
  
  .sidebar-item__link:hover,
  .sidebar-item__link:focus {
    color: var(--color-brand);
  }
  
  .sidebar-item__link--active {
    color: var(--color-brand);
    background-color: var(--color-hover);
  }
  
  .sidebar-item__icon {
    @apply w-5 h-5 mr-3 flex-shrink-0;
  }
  
  .sidebar-item__text {
    @apply flex-grow;
  }
  
  .sidebar-item__expander {
    @apply p-2 transition-all duration-200 focus:outline-none focus:ring-2 
           rounded-r-md flex items-center justify-center;
    color: var(--color-text-secondary);
    min-width: 2.5rem;
    min-height: 2.5rem;
    --tw-ring-color: var(--color-brand);
  }
  
  .sidebar-item__expander:hover,
  .sidebar-item__expander:focus {
    color: var(--color-brand);
    background-color: var(--color-surface-active);
  }
  
  .sidebar-item__chevron {
    @apply w-4 h-4 transition-transform duration-200;
  }
  
  /* Level-specific styling */
  .sidebar-item--level-1 .sidebar-item__text {
    @apply text-lg font-brand font-bold;
  }
  
  .sidebar-item--level-1 {
    @apply mb-1;
  }
  
  .sidebar-item--level-2 {
    @apply ml-4;
  }
  
  .sidebar-item--level-2 .sidebar-item__text {
    @apply font-normal text-base;
  }
  
  .sidebar-item--level-3 {
    @apply ml-6;
  }
  
  .sidebar-item--level-3 .sidebar-item__text {
    @apply font-light text-sm;
  }
  
  .sidebar-item--level-4 {
    @apply ml-8;
  }
  
  .sidebar-item--level-4 .sidebar-item__text {
    @apply text-sm;
  }
  
  .sidebar-item--level-default {
    @apply ml-10;
  }
  
  .sidebar-item--level-default .sidebar-item__text {
    @apply text-xs;
  }
  
  /* Ensure text-brand utility works with sidebar items */
  .sidebar-item__link.text-brand {
    color: var(--color-brand) !important;
  }
  
  /* Enhanced active state for the whole item */
  .sidebar-item:has(.sidebar-item__link--active) {
    background-color: var(--color-hover);
  }
  
  /* Enhanced Search Input */
  .search-input {
    @apply relative z-10 pl-12 pr-4 py-4 rounded-xl border-2 
           transition-all duration-300 focus:outline-none focus:ring-0;
    background-color: var(--color-surface);
    border-color: var(--color-border-primary);
    color: var(--color-text-primary);
    font-family: var(--font-brand);
    font-weight: 500;
    backdrop-filter: blur(10px);
    
    /* Enhanced green glow effect */
    box-shadow: 
      0 0 20px rgba(118, 185, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    
    /* Search icon */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3e%3cpath stroke='%2376b900' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m21 21-6-6m2-5a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z'/%3e%3c/svg%3e");
    background-position: left 1rem center;
    background-repeat: no-repeat;
    background-size: 1.5rem 1.5rem;
  }
  
  .search-input:hover {
    border-color: #76b900;
    background-color: var(--color-surface-hover);
    transform: translateY(-1px);
    box-shadow: 
      0 4px 12px rgba(0, 0, 0, 0.1),
      0 0 20px rgba(118, 185, 0, 0.25),
      0 0 40px rgba(118, 185, 0, 0.1);
  }
  
  .search-input:focus {
    border-color: #76b900;
    background-color: var(--color-surface);
    transform: translateY(-1px);
    box-shadow: 
      0 4px 12px rgba(0, 0, 0, 0.1),
      0 0 30px rgba(118, 185, 0, 0.4),
      0 0 60px rgba(118, 185, 0, 0.2),
      0 0 100px rgba(118, 185, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  
  .search-input::placeholder {
    color: var(--color-text-tertiary);
    font-style: italic;
  }
  
  /* Enhanced Search Container */
  .search-container {
    @apply relative;
    border-radius: 0.75rem;
    /* Remove overflow: hidden to allow glow effects */
    padding: 20px; /* Add padding to accommodate glow */
    margin: -20px; /* Negative margin to maintain original positioning */
  }
  
  /* Search container wrapper to prevent clipping */
  .search-container-wrapper {
    @apply relative;
    /* Extra space to accommodate glow effects */
    padding: 20px;
    margin: -20px;
  }
  
  .search-container::after {
    content: '';
    position: absolute;
    top: 20px;
    left: 20px;
    right: 20px;
    bottom: 20px;
    background: linear-gradient(
      135deg,
      rgba(118, 185, 0, 0.08) 0%,
      transparent 50%,
      rgba(118, 185, 0, 0.03) 100%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    border-radius: 0.75rem;
  }
  
  .search-container:hover::after,
  .search-container:focus-within::after {
    opacity: 1;
  }
  

  
  .search-container:focus-within .search-pulse {
    opacity: 1;
    background: radial-gradient(circle at center, rgba(118, 185, 0, 0.2) 0%, transparent 70%);
    animation: search-pulse-focus 1.5s ease-in-out infinite;
  }
  
  @keyframes search-pulse-focus {
    0%, 100% { 
      transform: scale(1); 
      opacity: 0.4;
    }
    50% { 
      transform: scale(1.03); 
      opacity: 0.8;
    }
  }
  
  /* Search Pulse Animation */
  .search-container:hover .search-pulse {
    opacity: 1;
    background: radial-gradient(
      circle at center,
      rgba(118, 185, 0, 0.15) 0%,
      transparent 70%
    );
    animation: search-pulse 2s infinite ease-in-out;
  }
  
  @keyframes search-pulse {
    0%, 100% { 
      transform: scale(1); 
      opacity: 0.3;
    }
    50% { 
      transform: scale(1.05); 
      opacity: 0.6;
    }
  }
  
  /* Enhanced Search Results Container */
  #searchResultsContainer {
    @apply rounded-xl border backdrop-blur-lg;
    background: linear-gradient(
      135deg, 
      rgba(var(--color-brand-rgb), 0.05) 0%,
      var(--color-bg-primary) 50%,
      rgba(var(--color-brand-rgb), 0.02) 100%
    );
    border-color: rgba(var(--color-brand-rgb), 0.2);
    box-shadow: 
      0 25px 50px rgba(0, 0, 0, 0.1),
      0 0 20px rgba(var(--color-brand-rgb), 0.1);
    animation: search-container-enter 0.5s ease-out;
  }
  
  @keyframes search-container-enter {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  /* Enhanced Search Hit Styling */
  .search-hit {
    @apply p-5 mb-4 rounded-xl border transition-all duration-300 cursor-pointer;
    background: var(--color-surface);
    border-color: var(--color-border-primary);
    position: relative;
    overflow: hidden;
  }
  
  .search-hit::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, var(--color-brand), transparent);
    transform: scaleX(0);
    transition: transform 0.4s ease;
  }
  
  .search-hit:hover {
    border-color: var(--color-brand);
    transform: translateY(-3px) scale(1.01);
    box-shadow: 
      0 15px 35px rgba(0, 0, 0, 0.1),
      0 0 25px rgba(var(--color-brand-rgb), 0.15);
  }
  
  .search-hit:hover::before {
    transform: scaleX(1);
  }
  
  .search-hit-title {
    @apply font-bold text-xl mb-3;
    color: var(--color-text-primary);
    font-family: var(--font-family-brand);
  }
  
  .search-hit-description {
    @apply text-sm leading-relaxed mb-3;
    color: var(--color-text-secondary);
  }
  
  .search-hit-section {
    @apply text-xs uppercase tracking-wider font-bold mb-2;
    color: var(--color-brand);
    letter-spacing: 0.1em;
  }
  
  .chat-input {
    @apply px-4 py-2 rounded-lg border transition-all duration-200 
           focus:outline-none focus:ring-2 focus:border-transparent;
    background-color: var(--color-bg-primary);
    border-color: var(--color-border-primary);
    color: var(--color-text-primary);
    --tw-ring-color: var(--color-brand);
  }
  
  .chat-input:focus {
    border-color: var(--color-brand);
  }
  
  /* Enhanced Interactive Tiles */
  .enhanced-tile {
    @apply relative overflow-hidden cursor-pointer;
    background-color: var(--color-surface);
    border: 2px solid var(--color-border-primary);
    position: relative;
    /* The magic spotlight background will be set by JavaScript */
    
    /* Enhanced glow effect */
    box-shadow: 
      0 4px 15px rgba(0, 0, 0, 0.1),
      0 0 10px rgba(var(--color-brand-rgb), 0.05);
  }
  
  .enhanced-tile::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(var(--color-brand-rgb), 0.03) 0%,
      transparent 50%,
      rgba(var(--color-brand-rgb), 0.01) 100%
    );
    pointer-events: none;
    transition: opacity 0.3s ease;
    opacity: 0;
  }
  
  .enhanced-tile a {
    @apply no-underline relative z-10;
    color: inherit;
  }
  
  .enhanced-tile a:hover {
    text-decoration: none;
  }
  
  /* Enhanced hover effects */
  .enhanced-tile:hover {
    border-color: var(--color-brand);
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.15),
      0 0 30px rgba(var(--color-brand-rgb), 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transform: translateY(-4px) scale(1.01);
  }
  
  .enhanced-tile:hover::after {
    opacity: 1;
  }
  
  /* Icon enhancement */
  .enhanced-tile:hover .icon {
    transform: scale(1.15) rotate(5deg);
    filter: brightness(0) saturate(100%) 
            sepia(100%) hue-rotate(150deg) 
            saturate(3) brightness(1.3)
            drop-shadow(0 0 8px rgba(var(--color-brand-rgb), 0.5));
  }
  
  .enhanced-tile .icon {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Enhanced Button System */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 
           font-medium rounded-lg transition-all duration-200 
           focus:outline-none focus:ring-2 focus:ring-offset-2;
    min-height: 2.5rem;
    text-decoration: none;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }
  
  .btn:disabled {
    @apply opacity-50 cursor-not-allowed;
  }
  
  .btn--primary {
    background-color: var(--color-brand);
    color: var(--color-text-inverse);
    --tw-ring-color: var(--color-brand);
  }
  
  .btn--primary:hover:not(:disabled) {
    background-color: var(--color-brand-1);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  .btn--secondary {
    background-color: var(--color-surface);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-primary);
    --tw-ring-color: var(--color-brand);
  }
  
  .btn--secondary:hover:not(:disabled) {
    background-color: var(--color-surface-hover);
    border-color: var(--color-brand);
    transform: translateY(-1px);
  }
  
  .btn--ghost {
    background-color: transparent;
    color: var(--color-text-secondary);
    --tw-ring-color: var(--color-brand);
  }
  
  .btn--ghost:hover:not(:disabled) {
    background-color: var(--color-surface-hover);
    color: var(--color-text-primary);
  }
  
  .btn--danger {
    background-color: var(--color-brand-7);
    color: var(--color-text-inverse);
    --tw-ring-color: var(--color-brand-7);
  }
  
  .btn--danger:hover:not(:disabled) {
    background-color: #dc2626;
    transform: translateY(-1px);
  }
  
  .btn--sm {
    @apply px-3 py-1 text-sm;
    min-height: 2rem;
  }
  
  .btn--lg {
    @apply px-6 py-3 text-lg;
    min-height: 3rem;
  }
  
  .btn__icon {
    @apply w-4 h-4 mr-2;
  }
  
  .btn__icon--right {
    @apply w-4 h-4 ml-2 mr-0;
  }
  
  /* Enhanced loading state */
  .btn--loading {
    @apply opacity-75 cursor-wait;
  }
  
  .btn--loading::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 1rem;
    height: 1rem;
    margin: -0.5rem 0 0 -0.5rem;
    border: 2px solid transparent;
    border-top-color: currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  
  /* Enhanced Toggle Buttons */
  .toggle-btn {
    @apply relative p-2 rounded-lg transition-all duration-200 
           focus:outline-none focus:ring-2 focus:ring-offset-2;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border-primary);
    color: var(--color-text-secondary);
    --tw-ring-color: var(--color-brand);
    min-width: 2.5rem;
    min-height: 2.5rem;
    overflow: hidden;
  }
  
  .toggle-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(
      circle at center,
      rgba(var(--color-brand-rgb), 0.1) 0%,
      transparent 70%
    );
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
  }
  
  .toggle-btn:hover {
    background-color: var(--color-surface-hover);
    border-color: var(--color-brand);
    color: var(--color-text-primary);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  
  .toggle-btn:hover::before {
    opacity: 1;
  }
  
  .toggle-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  .toggle-btn--active {
    background-color: var(--color-brand);
    color: var(--color-text-inverse);
    border-color: var(--color-brand);
  }
  
  .toggle-btn--active:hover {
    background-color: var(--color-brand-1);
    color: var(--color-text-inverse);
  }
  
  .toggle-btn img {
    @apply w-5 h-5 transition-all duration-200;
    filter: brightness(0.8);
  }
  
  .toggle-btn:hover img {
    filter: brightness(1);
    transform: scale(1.1);
  }
  
  .toggle-btn--active img {
    filter: brightness(1) invert(1);
  }
  

  
  /* Enhanced Article Components */
  
  /* Enhanced Chat Interface */
  .enhanced-chat-controls {
    @apply flex flex-col space-y-3 p-4 rounded-xl;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border-primary);
    backdrop-filter: blur(10px);
    box-shadow: 
      0 4px 12px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  
  .chat-form {
    @apply flex space-x-3;
  }
  
  .chat-input {
    @apply flex-grow px-4 py-3 rounded-lg border-2 
           transition-all duration-200 focus:outline-none focus:ring-2;
    background-color: var(--color-bg-primary);
    border-color: var(--color-border-primary);
    color: var(--color-text-primary);
    font-family: var(--font-brand);
    --tw-ring-color: var(--color-brand);
  }
  
  .chat-input:hover {
    border-color: var(--color-brand);
    background-color: var(--color-surface-hover);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .chat-input:focus {
    border-color: var(--color-brand);
    background-color: var(--color-bg-primary);
    transform: translateY(-1px);
    box-shadow: 
      0 2px 8px rgba(0, 0, 0, 0.1),
      0 0 20px rgba(var(--color-brand-rgb), 0.2);
  }
  
  .chat-input::placeholder {
    color: var(--color-text-tertiary);
    font-style: italic;
  }
  
  /* Enhanced Chat Messages */
  #chat-messages {
    @apply flex flex-col space-y-4 p-4;
    max-height: calc(100vh - 12rem);
    overflow-y: auto;
    scroll-behavior: smooth;
  }
  
  .chat-bubble {
    @apply p-4 rounded-xl shadow-sm relative max-w-none;
    word-wrap: break-word;
    word-break: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    white-space: pre-wrap;
    line-height: 1.6;
    font-family: var(--font-brand);
  }
  
  .chat-bubble--user {
    @apply ml-8;
    background-color: var(--color-brand);
    color: var(--color-text-inverse);
    border-bottom-right-radius: 0.375rem;
  }
  
  .chat-bubble--bot {
    @apply mr-8;
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      var(--color-bg-secondary) 100%
    );
    border: 1px solid var(--color-border-primary);
    color: var(--color-text-primary);
    border-bottom-left-radius: 0.375rem;
  }
  
  .chat-bubble--error {
    @apply mr-8;
    background: linear-gradient(
      135deg,
      rgba(239, 68, 68, 0.1) 0%,
      rgba(239, 68, 68, 0.05) 100%
    );
    border: 1px solid rgba(239, 68, 68, 0.2);
    color: var(--color-text-primary);
    border-bottom-left-radius: 0.375rem;
  }
  
  /* Chat message formatting */
  .chat-bubble p {
    @apply mb-3 last:mb-0;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
  
  .chat-bubble code {
    @apply px-2 py-1 rounded text-sm;
    background-color: rgba(var(--color-brand-rgb), 0.1);
    color: var(--color-brand);
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    word-break: break-all;
  }
  
  .chat-bubble pre {
    @apply p-3 rounded-lg overflow-x-auto text-sm my-3;
    background-color: var(--color-bg-tertiary);
    border: 1px solid var(--color-border-primary);
  }
  
  .chat-bubble pre code {
    @apply p-0;
    background: none;
    color: var(--color-text-primary);
  }
  
  /* Chat message animations */
  .chat-bubble {
    animation: chat-message-enter 0.3s ease-out;
  }
  
  @keyframes chat-message-enter {
    from {
      opacity: 0;
      transform: translateY(10px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  /* Enhanced typing indicator */
  .typing-indicator {
    @apply flex items-center space-x-2 p-4 rounded-xl mr-8;
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      var(--color-bg-secondary) 100%
    );
    border: 1px solid var(--color-border-primary);
  }
  
  .typing-indicator::after {
    content: '';
    display: inline-block;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background-color: var(--color-text-secondary);
    animation: typing-dot 1.4s infinite;
  }
  
  .typing-indicator::before {
    content: '';
    display: inline-block;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background-color: var(--color-text-secondary);
    animation: typing-dot 1.4s infinite 0.2s;
    margin-right: 4px;
  }
  
  @keyframes typing-dot {
    0%, 60%, 100% {
      opacity: 0.3;
      transform: scale(1);
    }
    30% {
      opacity: 1;
      transform: scale(1.2);
    }
  }
  
  /* Chat pair container */
  .chat-pair {
    @apply space-y-2;
  }
  
  /* Delete button styling */
  .chat-delete {
    @apply absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white 
           rounded-full flex items-center justify-center text-xs
           opacity-0 group-hover:opacity-100 transition-opacity duration-200
           hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500;
  }
  
  .chat-pair:hover .chat-delete {
    opacity: 1;
  }
  

  
  /* Enhanced Navigation Links */
  .enhanced-nav-link {
    @apply relative inline-flex items-center px-6 py-4 rounded-xl
           transition-all duration-200 focus:outline-none focus:ring-2;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border-primary);
    color: var(--color-text-primary);
    text-decoration: none;
    --tw-ring-color: var(--color-brand);
    overflow: hidden;
    backdrop-filter: blur(10px);
  }
  
  .enhanced-nav-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(var(--color-brand-rgb), 0.08) 0%,
      transparent 50%,
      rgba(var(--color-brand-rgb), 0.03) 100%
    );
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
  }
  
  .enhanced-nav-link:hover {
    border-color: var(--color-brand);
    color: var(--color-brand);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }
  
  .enhanced-nav-link:hover::before {
    opacity: 1;
  }
  
  .enhanced-nav-link--disabled {
    @apply opacity-50 cursor-not-allowed;
    background-color: var(--color-bg-tertiary);
    color: var(--color-text-tertiary);
  }
  
  /* Enhanced Resource Cards */
  .enhanced-resource-card {
    @apply relative rounded-xl border transition-all duration-300 overflow-hidden;
    background-color: var(--color-surface);
    border-color: var(--color-border-primary);
    backdrop-filter: blur(10px);
    box-shadow: 
      0 2px 8px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  
  .enhanced-resource-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(var(--color-brand-rgb), 0.03) 0%,
      transparent 50%,
      rgba(var(--color-brand-rgb), 0.01) 100%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }
  
  .enhanced-resource-card:hover {
    border-color: var(--color-brand);
    transform: translateY(-4px);
    box-shadow: 
      0 12px 24px rgba(0, 0, 0, 0.1),
      0 0 20px rgba(var(--color-brand-rgb), 0.1);
  }
  
  .enhanced-resource-card:hover::after {
    opacity: 1;
  }
  
  /* Enhanced TOC Styling */
  .enhanced-toc {
    @apply rounded-xl p-6 mb-8;
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      var(--color-bg-secondary) 100%
    );
    border: 1px solid var(--color-border-primary);
    backdrop-filter: blur(10px);
    box-shadow: 
      0 4px 12px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  
  .toc-header {
    @apply flex items-center mb-4 pb-3 border-b;
    border-color: var(--color-border-primary);
    color: var(--color-text-primary);
  }
  
  .toc-content a {
    @apply inline-block py-2 px-3 rounded-lg transition-all duration-200;
    color: var(--color-text-secondary);
    text-decoration: none;
  }
  
  .toc-content a:hover {
    background-color: var(--color-surface-hover);
    color: var(--color-brand);
    transform: translateX(4px);
  }
  
  /* Enhanced Right Sidebar TOC */
  .enhanced-toc-sidebar {
    @apply p-6 text-sm;
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      var(--color-bg-secondary) 100%
    );
    border-radius: 0.75rem;
    backdrop-filter: blur(10px);
    color: var(--color-text-primary);
  }
  
  .enhanced-toc-sidebar nav {
    position: relative;
  }
  
  .enhanced-toc-sidebar nav::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 3px;
    height: 100%;
    background: linear-gradient(
      to bottom,
      var(--color-brand) 0%,
      rgba(var(--color-brand-rgb), 0.3) 50%,
      transparent 100%
    );
    border-radius: 2px;
  }
  
  .enhanced-toc-sidebar ul {
    @apply list-none pl-4 space-y-1;
    margin: 0;
  }
  
  .enhanced-toc-sidebar ul ul {
    @apply pl-4 mt-2 border-l border-opacity-20;
    border-color: var(--color-border-primary);
  }
  
  /* TOC Link Styling */
  .toc-link {
    @apply block py-2 px-3 rounded-lg transition-all duration-200 
           relative overflow-hidden;
    color: var(--color-text-secondary);
    text-decoration: none;
    line-height: 1.4;
    font-weight: 400;
  }
  
  .toc-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      90deg,
      rgba(var(--color-brand-rgb), 0.08) 0%,
      transparent 100%
    );
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
  }
  
  .toc-link:hover {
    background-color: var(--color-surface-hover);
    color: var(--color-brand);
    transform: translateX(4px);
    padding-left: calc(0.75rem + 2px);
    border-left: 2px solid var(--color-brand);
  }
  
  .toc-link:hover::before {
    opacity: 1;
  }
  
  .toc-link:focus {
    outline: 2px solid var(--color-brand);
    outline-offset: 2px;
    color: var(--color-brand);
  }
  
  /* Heading Level Variations */
  .toc-link--h1 {
    font-weight: 600;
    font-size: 0.95em;
    color: var(--color-text-primary);
  }
  
  .toc-link--h2 {
    font-weight: 500;
    color: var(--color-brand);
    opacity: 0.9;
  }
  
  .toc-link--h3 {
    font-size: 0.85em;
    color: var(--color-text-tertiary);
    font-weight: 400;
  }
  
  /* Active state styling */
  .toc-link.active {
    background-color: var(--color-brand);
    color: var(--color-text-inverse);
    font-weight: 500;
    transform: translateX(2px);
    box-shadow: 0 2px 8px rgba(var(--color-brand-rgb), 0.3);
  }
  
  .toc-link.active::before {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.2) 0%,
      transparent 100%
    );
    opacity: 1;
  }
  
  /* Smooth scrolling indicator */
  .toc-progress {
    position: absolute;
    top: 0;
    left: 0;
    width: 2px;
    height: 0%;
    background-color: var(--color-brand);
    transition: height 0.3s ease;
    border-radius: 1px;
  }
  
  /* Enhanced animations */
  .enhanced-toc-sidebar {
    animation: toc-enter 0.4s ease-out;
  }
  
  /* Enhanced Notice Components - moved to components/notice.css */
  
  @keyframes toc-enter {
    from {
      opacity: 0;
      transform: translateX(20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .enhanced-toc-sidebar {
      @apply p-4 text-xs;
    }
    
    .toc-link {
      @apply py-1.5 px-2;
    }
  }
  /* Enhanced Navigation Animations */
  /* Hide nested content by default to prevent flash */
  .nested-content {
    display: none;
  }
  
  /* Sidebar Container Styling */
  .sidebar-container {
    background-color: var(--color-surface);
    color: var(--color-text-primary);
    border-right: 1px solid var(--color-border-primary);
  }
  
  @media (min-width: 768px) {
    .sidebar-container {
      background-color: transparent;
      border-right: none;
    }
  }
  
  /* Mobile Header Styling */
  .sidebar-header {
    border-bottom: 1px solid var(--color-border-primary);
    background-color: var(--color-surface);
    color: var(--color-text-primary);
  }
  
  .sidebar-close-btn {
    color: var(--color-text-secondary);
    transition: all 0.2s ease;
  }
  
  .sidebar-close-btn:hover {
    background-color: var(--color-surface-hover);
    color: var(--color-text-primary);
  }
  
  /* LinkTree Styling */
  #linkTree {
    background-color: transparent;
    color: var(--color-text-primary);
  }
  
  /* Prevent layout shift during initialization */
  #linkTree:not(.initialized) {
    opacity: 0;
    transition: opacity 0.2s ease;
  }
  
  #linkTree.initialized {
    opacity: 1;
  }
  
  /* Show nested content when sidebar is initialized and expanded */
  #linkTree.initialized .nested-content.expanded {
    display: block;
  }
  
  /* Only animate after initialization to prevent flash */
  #linkTree.initialized .nested-content.expanding {
    display: block;
    animation: slideDown 0.3s ease-out;
    overflow: hidden;
  }

  #linkTree.initialized .nested-content.collapsing {
    animation: slideUp 0.3s ease-out;
    overflow: hidden;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      max-height: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      max-height: 1000px;
      transform: translateY(0);
    }
  }

  @keyframes slideUp {
    from {
      opacity: 1;
      max-height: 1000px;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      max-height: 0;
      transform: translateY(-10px);
    }
  }

  /* Enhanced hover states */
  .nested-content a:hover {
    transform: translateX(4px);
    @apply transition-transform duration-200;
  }

  /* Loading skeleton for content */
  .content-skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
  }

  @keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Page transitions removed - caused flicker with static site navigation */

  /* Ripple effect for buttons */
  button {
    @apply relative overflow-hidden;
  }

  .ripple {
    @apply absolute rounded-full pointer-events-none;
    background: rgba(255, 255, 255, 0.3);
    transform: scale(0);
    animation: ripple-animation 0.6s ease-out;
  }

  @keyframes ripple-animation {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  /* Enhanced micro-interactions */
  .tile, .card {
    @apply transition-all duration-200;
  }

  .tile:hover, .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }

  /* Fade-in animation classes */
  .fade-in-on-scroll {
    opacity: 0;
    transform: translateY(20px);
    @apply transition-all duration-700;
  }

  .fade-in-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Enhanced focus states for accessibility */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: 2px solid var(--color-brand);
    outline-offset: 2px;
    @apply rounded;
  }

  /* Notification styles */
  .notification {
    @apply fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300;
  }

  /* Loading states */
  .loading-spinner {
    border: 2px solid var(--color-border-primary);
    border-top: 2px solid var(--color-brand);
    @apply rounded-full w-5 h-5;
    animation: spin 1s linear infinite;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background-color: var(--color-bg-secondary);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-brand);
    @apply rounded;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-brand-1);
  }

  /* Mobile-specific enhancements */
  @media (max-width: 768px) {
    /* Larger touch targets */
    button, a {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Better spacing for mobile */
    .tile, .card {
      @apply mb-4;
    }
    
    /* Reduced motion for users who prefer it */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  }

  /* Dark mode enhancements */
  .dark .content-skeleton {
    background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
  }

  .dark .ripple {
    background: rgba(255, 255, 255, 0.2);
  }
}

@tailwind utilities;

@layer utilities {
  /* CSS custom properties for dynamic viewport height on mobile */
  :root {
    --vh: 1vh;
  }

  .h-screen-dynamic {
    height: calc(var(--vh, 1vh) * 100);
  }
}
