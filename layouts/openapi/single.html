{{- define "top-bar" -}}
  {{- partial "navigation/topbar/main.html" . -}}
{{- end -}}

{{- define "sidebar-left" -}}
  {{- partial "navigation/openapi-sidebar.html" . -}}
{{- end -}}

{{- define "content" -}}
<article id="articleContent" 
         class="openapi-spec api-endpoint"
         data-component="openapi-viewer">
  
  {{- $apiData := .Params.api_data -}}
  {{- $currentMethod := .Params.endpoint.method -}}
  {{- $currentPath := .Params.endpoint.path -}}
  {{- $currentTag := .Params.endpoint.tag -}}
  {{- $operationId := .Params.endpoint.operationId -}}
  
  {{/* Use operation data from front matter */}}
  {{ $operation := .Params.endpoint.operation }}
  
  {{- if not $apiData -}}
    <div class="error-message">
      <h2>API Data Not Found</h2>
      <p>Could not load API data from page front matter.</p>
    </div>
    {{ return }}
  {{- end -}}
  
  <!-- Endpoint Header -->
  <header class="api-endpoint-header">
    <div class="api-endpoint-breadcrumb">
      <a href="../../">{{ $apiData.Info.Title }}</a> / 
      <a href="../">{{ $currentTag }}</a> / 
      {{ .Title }}
    </div>
    
    <div class="endpoint-title-section">
      <div class="endpoint-method-path">
        <span class="method-badge method-badge--{{ lower $currentMethod }}">
          {{ upper $currentMethod }}
        </span>
        <code class="endpoint-path">{{ $currentPath }}</code>
      </div>
      <h1>{{ $operation.Summary | default .Title }}</h1>
      {{ with $operation.Description }}
        <p class="endpoint-description">{{ . | markdownify }}</p>
      {{ end }}
    </div>
  </header>
  
  <!-- Endpoint Details -->
  <div class="api-endpoint-content">
    {{ $endpointId := printf "%s-%s" (upper $currentMethod) ($currentPath | replace "/" "-" | replace "{" "" | replace "}" "" | urlize) }}
    
    <div class="endpoint-item" id="{{ $endpointId }}" data-method="{{ upper $currentMethod }}" data-path="{{ $currentPath }}">
      
      <!-- Endpoint Details -->
      <div class="endpoint-details" id="{{ $endpointId }}-details">
        
        <!-- Parameters -->
        {{ with $operation.Parameters }}
          {{ partial "openapi/endpoint-parameters.html" (dict "parameters" . "spec" $apiData) }}
        {{ end }}
        
        <!-- Request Body -->
        {{ with $operation.RequestBody }}
          {{ partial "openapi/endpoint-request-body.html" (dict "requestBody" . "spec" $apiData) }}
        {{ end }}
        
        <!-- Responses -->
        {{ with $operation.Responses }}
          {{ partial "openapi/endpoint-responses.html" (dict "responses" . "spec" $apiData) }}
        {{ end }}
        
        <!-- Security -->
        {{ with $operation.Security }}
          {{ partial "openapi/endpoint-security.html" (dict "security" . "spec" $apiData) }}
        {{ end }}
        
        <!-- Code Examples -->
        {{ partial "openapi/endpoint-examples.html" (dict 
            "method" (upper $currentMethod)
            "path" $currentPath
            "operation" $operation
            "spec" $apiData) }}
      </div>
    </div>
  </div>

</article>
{{- end -}}

{{- define "sidebar-right" -}}
  {{- partial "navigation/sidebar-right.html" . -}}
{{- end -}}