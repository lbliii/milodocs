{{- $logo := .Site.Params.logo -}}
<a href="{{ "/" | relURL }}" class="topbar__logo-link">
{{- if $logo -}}
  {{/* Try to get the logo as a page resource first, then as a global resource */}}
  {{- $logoResource := "" -}}
  {{- $logoPath := strings.TrimPrefix "/" $logo -}}
  
  {{- $logoResource = resources.Get $logoPath -}}
  {{- if not $logoResource -}}
    {{/* Fallback to static file with optimized delivery */}}
    <img src="{{ $logo }}" 
         alt="Home" 
         class="topbar__logo-image" 
         width="32" 
         height="32"
         loading="eager"
         decoding="async">
  {{- else -}}
    {{/* Use Hugo's image processing for optimal delivery */}}
    {{- $logoSmall := $logoResource.Resize "32x32 webp q85" -}}
    {{- $logoRetina := $logoResource.Resize "64x64 webp q85" -}}
    <img src="{{ $logoSmall.RelPermalink }}" 
         srcset="{{ $logoSmall.RelPermalink }} 1x, {{ $logoRetina.RelPermalink }} 2x"
         alt="Home" 
         class="topbar__logo-image"
         width="32" 
         height="32"
         loading="eager"
         decoding="async">
  {{- end -}}
{{- else -}}
<img id="lightModeHome" src="{{ "icons/light/home.svg" | relURL }}" alt="Home" class="topbar__logo-image hidden">
<img id="darkModeHome" src="{{ "icons/dark/home.svg" | relURL }}" alt="Home" class="topbar__logo-image hidden">
{{- end -}}
</a>
