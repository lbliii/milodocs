{{if and (.Pages) (.Site.Params.article.childArticles.display)}}
{{$titleTrunc := .Site.Params.article.childArticles.titleTrunc }}
{{$descTrunc := .Site.Params.article.childArticles.descTrunc }}
{{$count := .Site.Params.article.childArticles.count }}

<div class="grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-6 md:gap-8 2xl:grid-cols-3" data-component="article-tiles">
    {{ range .Pages }}
        {{ if  .Params.hidden }}
            {{/* Do not show the hidden child page or its descendants */}}
        {{else}}
        <div class="tile rounded-lg p-6 space-y-4">
            <a href="{{ with .Params.externalRedirect}}{{.}}{{else}}{{.RelPermalink}}{{end}}" class="space-y-3 block">
                <div class="flex items-start space-x-3">
                    {{with .Params.icon}}
                        <img src="{{ printf "icons/light/%s" . | relURL }}" alt="" class="w-6 h-6 icon flex-shrink-0 mt-1">
                    {{end}}
                    <div class="flex-grow">
                        <h3 class="text-xl font-brand font-semibold leading-tight" style="color: var(--color-text-primary);">
                            {{if .Params.linkTitle}} 
                                {{.Params.linkTitle}} 
                            {{else}}
                                {{ .Title | truncate $titleTrunc}}
                            {{end}}
                        </h3>
                    </div>
                </div>
                
                {{ with .Description | truncate $descTrunc}}
                    <p class="text-sm leading-relaxed" style="color: var(--color-text-secondary);">{{ . }}</p>
                {{ end }}
            </a>
            
            {{- partial "article/child-links.html" (dict "page" . "count" $count) -}}
        </div>
        {{end}}
    {{ end }}
</div>

{{end}}